
# 5 大类 HTTP 面试常问的题目
1.HTTP 基本概念  
2.Get 与 Post  
3.HTTP 特性  
4.HTTPS 与 HTTP  
5.HTTP/1.1、HTTP/2、HTTP/3 演变  
![](Http面试题/2-提纲.png)
<!--more-->

# HTTP 基本概念

## HTTP 是什么？描述一下
HTTP 是超文本传输协议，也就是HyperText Transfer Protocol。

## 能否详细解释「超文本传输协议」？
HTTP 是一个在计算机世界里专门在「两点」之间「传输」文字、图片、音频、视频等「超文本」数据的「约定和规范」。  

## 那HTTP 是用于从互联网服务器传输超文本到本地浏览器的协议 ，这种说法正确吗？
这种说法是不正确的。因为也可以是「服务器< -- >服务器」，所以采用两点之间的描述会更准确。  

## HTTP 常见的状态码，有哪些？
![](Http面试题/6-五大类HTTP状态码.png)
### 1xx
1xx 类状态码属于提示信息，是协议处理中的一种中间状态，实际用到的比较少。
### 2xx
 2xx 类状态码表示服务器成功处理了客户端的请求，也是我们最愿意看到的状态。  
「200 OK」是最常见的成功状态码，表示一切正常。如果是非 HEAD 请求，服务器返回的响应头都会有 body 数据。  
「204 No Content」也是常见的成功状态码，与 200 OK 基本相同，但响应头没有 body 数据  
「206 Partial Content」是应用于 HTTP 分块下载或断点续传，表示响应返回的 body 数据并不是资源的全部，而是其中的一部分，也是服务器处理成功的状态。  

### 3xx
3xx 类状态码表示客户端请求的资源发送了变动，需要客户端用新的 URL 重新发送请求获取资源，也就是重定向。  
「301 Moved Permanently」表示永久重定向，说明请求的资源已经不存在了，需改用新的 URL 再次访问。  
「302 Found」表示临时重定向，说明请求的资源还在，但暂时需要用另一个 URL 来访问。  
301 和 302 都会在响应头里使用字段 Location，指明后续要跳转的 URL，浏览器会自动重定向新的 URL。  
「304 Not Modified」不具有跳转的含义，表示资源未修改，重定向已存在的缓冲文件，也称缓存重定向，用于缓存控制。  

### 4xx
4xx 类状态码表示客户端发送的报文有误，服务器无法处理，也就是错误码的含义。  
「400 Bad Request」表示客户端请求的报文有错误，但只是个笼统的错误。  
「403 Forbidden」表示服务器禁止访问资源，并不是客户端的请求出错。  
「404 Not Found」表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。  
### 5xx
5xx 类状态码表示客户端请求报文正确，但是服务器处理时内部发生了错误，属于服务器端的错误码。  
「500 Internal Server Error」与 400 类型，是个笼统通用的错误码，服务器发生了什么错误，我们并不知道。  
「501 Not Implemented」表示客户端请求的功能还不支持，类似“即将开业，敬请期待”的意思。  
「502 Bad Gateway」通常是服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误。  
「503 Service Unavailable」表示服务器当前很忙，暂时无法响应服务器，类似“网络服务正忙，请稍后重试”的意思。  

## http 常见字段有哪些？
* Host 字段 客户端发送请求时，用来指定服务器的域名。
* Content-Length 字段  服务器在返回数据时，会有 Content-Length 字段，表明本次回应的数据长度。
* Connection 字段 Connection 字段最常用于客户端要求服务器使用 TCP 持久连接，以便其他请求复用。 HTTP/1.1 版本的默认连接都是持久连接，但为了兼容老版本的 HTTP，需要指定 Connection 首部字段的值为 Keep-Alive。  
* Content-Type 字段 用于服务器回应时，告诉客户端，本次数据是什么格式。 客户端请求的时候，可以使用 Accept 字段声明自己可以接受哪些数据格式。
* Content-Encoding 字段 说明数据的压缩方法。表示服务器返回的数据使用了什么压缩格式 客户端在请求时，用 Accept-Encoding 字段说明自己可以接受哪些压缩方法。  

# GET 与 POST
 
Get 方法的含义是请求从服务器获取资源，这个资源可以是静态的文本、页面、图片视频等。  
而POST 方法则是相反操作，它向 URI 指定的资源提交数据，数据就放在报文的 body 里  

## GET 和 POST 方法都是安全和幂等的吗？
先说明下安全和幂等的概念：  
* 在 HTTP 协议里，所谓的「安全」是指请求方法不会「破坏」服务器上的资源。
* 所谓的「幂等」，意思是多次执行相同的操作，结果都是「相同」的。
那么很明显 GET 方法就是安全且幂等的，因为它是「只读」操作，无论操作多少次，服务器上的数据都是安全的，且每次的结果都是相同的。  
POST 因为是「新增或提交数据」的操作，会修改服务器上的资源，所以是不安全的，且多次提交数据就会创建多个资源，所以不是幂等的。  

# HTTP 特性

## 你知道的 HTTP（1.1） 的优点有哪些，怎么体现的？
HTTP 最凸出的优点是「简单、灵活和易于扩展、应用广泛和跨平台」。 
###  简单
HTTP 基本的报文格式就是 header + body，头部信息也是 key-value 简单文本的形式，易于理解，降低了学习和使用的门槛。  
### 灵活和易于扩展
HTTP协议里的各类请求方法、URI/URL、状态码、头字段等每个组成要求都没有被固定死，都允许开发人员自定义和扩充。  
同时 HTTP 由于是工作在应用层（ OSI 第七层），则它下层可以随意变化。  
HTTPS 也就是在 HTTP 与 TCP 层之间增加了 SSL/TLS 安全传输层，HTTP/3 甚至把 TCP 层换成了基于 UDP 的 QUIC。  
### 应用广泛和跨平台
互联网发展至今，HTTP 的应用范围非常的广泛，从台式机的浏览器到手机上的各种 APP，从看新闻、刷贴吧到购物、理财、吃鸡，HTTP 的应用片地开花，同时天然具有跨平台的优越性。  

## 那它的缺点呢？
HTTP 协议里有优缺点一体的双刃剑，分别是「无状态、明文传输」，同时还有一大缺点「不安全」。  
### 无状态双刃剑
无状态的好处，因为服务器不会去记忆 HTTP 的状态，所以不需要额外的资源来记录状态信息，这能减轻服务器的负担，能够把更多的 CPU 和内存用来对外提供服务。  
无状态的坏处，既然服务器没有记忆能力，它在完成有关联性的操作时会非常麻烦。  

### 明文传输双刃剑
明文意味着在传输过程中的信息，是可方便阅读的，通过浏览器的 F12 控制台或 Wireshark 抓包都可以直接肉眼查看，为我们调试工作带了极大的便利性。
但是这正是这样，HTTP 的所有信息都暴露在了光天化日下，相当于信息裸奔。在传输的漫长的过程中，信息的内容都毫无隐私可言，很容易就能被窃取，如果里面有你的账号密码信息，那你号没了。  

### 不安全
HTTP 比较严重的缺点就是不安全  
* 通信使用明文（不加密），内容可能会被窃听。
* 不验证通信方的身份，因此有可能遭遇伪装。
* 无法证明报文的完整性，所以有可能已遭篡改。
HTTP 的安全问题，可以用 HTTPS 的方式解决，也就是通过引入 SSL/TLS 层，使得在安全上达到了极致。  

## 那你再说下 HTTP/1.1 的性能如何？
HTTP 协议是基于 TCP/IP，并且使用了「请求 - 应答」的通信模式，所以性能的关键就在这两点里。  
### 长连接
早期 HTTP/1.0 性能上的一个很大的问题，那就是每发起一个请求，都要新建一次 TCP 连接（三次握手），而且是串行请求，做了无谓的 TCP 连接建立和断开，增加了通信开销。  
为了解决上述 TCP 连接问题，HTTP/1.1 提出了长连接的通信方式，也叫持久连接。这种方式的好处在于减少了 TCP 连接的重复建立和断开所造成的额外开销，减轻了服务器端的负载。  
持久连接的特点是，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。  

### 管道网络传输
HTTP/1.1 采用了长连接的方式，这使得管道（pipeline）网络传输成为了可能。   
即可在同一个 TCP 连接里面，客户端可以发起多个请求，只要第一个请求发出去了，不必等其回来，就可以发第二个请求出去，可以减少整体的响应时间。  
但是服务器还是按照顺序，先回应 A 请求，完成后再回应 B 请求。要是前面的回应特别慢，后面就会有许多请求排队等着。这称为「队头堵塞」。 

###  队头阻塞
「请求 - 应答」的模式加剧了 HTTP 的性能问题。  
因为当顺序发送的请求序列中的一个请求因为某种原因被阻塞时，在后面排队的所有请求也一同被阻塞了，会招致客户端一直请求不到数据，这也就是「队头阻塞」。好比上班的路上塞车。  
总之 HTTP/1.1 的性能一般般，后续的 HTTP/2 和 HTTP/3 就是在优化 HTTP 的性能。  

# HTTP 与 HTTPS

## HTTP 与 HTTPS 有哪些区别？
1. HTTP 是超文本传输协议，信息是明文传输，存在安全风险的问题。HTTPS 则解决 HTTP 不安全的缺陷，在 TCP 和 HTTP 网络层之间加入了 SSL/TLS 安全协议，使得报文能够加密传输。  
2. HTTP 连接建立相对简单， TCP 三次握手之后便可进行 HTTP 的报文传输。而 HTTPS 在 TCP 三次握手之后，还需进行 SSL/TLS 的握手过程，才可进入加密报文传输。
3. HTTP 的端口号是 80，HTTPS 的端口号是 443。
4. HTTPS 协议需要向 CA（证书权威机构）申请数字证书，来保证服务器的身份是可信的。

## HTTPS 解决了 HTTP 的哪些问题？
HTTP 由于是明文传输，所以安全上存在以下三个风险：  
* 窃听风险，比如通信链路上可以获取通信内容，用户号容易没
* 篡改风险，比如强制植入垃圾广告，视觉污染，用户眼容易瞎。
* 冒充风险，比如冒充淘宝网站，用户钱容易没。
HTTPS 在 HTTP 与 TCP 层之间加入了 SSL/TLS 协议，可以很好的解决了上述的风险： 
* 信息加密：交互信息无法被窃取
* 校验机制：无法篡改通信内容
* 身份证书：证明淘宝是真的淘宝网

## HTTPS 是如何解决上面的三个风险的？
* 混合加密的方式实现信息的机密性，解决了窃听的风险。
* 摘要算法的方式来实现完整性，它能够为数据生成独一无二的「指纹」，指纹用于校验数据的完整性，解决了篡改的风险。
* 将服务器公钥放入到数字证书中，解决了冒充的风险。
### 混合加密
HTTPS 采用的是对称加密和非对称加密结合的「混合加密」方式：
* 在通信建立前采用非对称加密的方式交换「会话秘钥」，后续就不再使用非对称加密
* 在通信过程中全部使用对称加密的「会话秘钥」的方式加密明文数据。
采用「混合加密」的方式的原因：  
* 对称加密只使用一个密钥，运算速度快，密钥必须保密，无法做到安全的密钥交换。
* 非对称加密使用两个密钥：公钥和私钥，公钥可以任意分发而私钥保密，解决了密钥交换问题但速度慢。
### 摘要算法
摘要算法用来实现完整性，能够为数据生成独一无二的「指纹」，用于校验数据的完整性，解决了篡改的风险  

###  数字证书
客户端先向服务器端索要公钥，然后用公钥加密信息，服务器收到密文后，用自己的私钥解密。
![](Http面试题/22-数字证书工作流程.png)

## HTTPS 是如何建立连接的？其间交互了什么？
SSL/TLS 协议基本流程：  
* 客户端向服务器索要并验证服务器的公钥。
* 双方协商生产「会话秘钥」。
* 双方采用「会话秘钥」进行加密通信。

详细过程如下：  
1.客户端=>服务端：随机数1,，协议版本，加密算法  
2.服务端=>客户端：随机数2，数字证书，确定加密算法  
3.客户端确认证书是否有效;生成随机数3;使用服务器公钥加密随机数3
4.客户端=>服务端：发送随机数3
> 客户端和服务端根据随机数1,2,3 生成对称秘钥，用于后面数据传输


# HTTP/1.1、HTTP/2、HTTP/3 演变
HTTP/1.1是最早的HTTP版本，使用传统的文本格式进行通信。它的主要特点是每个请求需要建立一个新的TCP连接，这称为"串行"方式，导致了"队头阻塞"的问题。也就是说，如果一个请求在处理过程中遇到延迟，后续的请求必须等待。此外，HTTP/1.1没有对头部压缩和请求优先级的支持，这导致了较低的性能和效率。但是，HTTP/1.1相比HTTP/1.0增加了多种缓存处理的请求头、Range支持分片资源传输、Host头支持Host域名对应多个ip地址等特性，还支持长连接（Connection： keep-alive）和请求流水线（Pipelining）处理，可以发送多个请求。

HTTP/2是HTTP/1.1的升级版本，引入了一些新的特性来提高性能。其中最显著的特点是引入了二进制分帧层，将HTTP报文分割为多个二进制帧进行传输，实现了多路复用。这意味着可以通过单个TCP连接同时发送和接收多个请求和响应，避免了队头阻塞问题。此外，HTTP/2还引入了头部压缩，减少了传输的数据量，提高了效率。HTTP/2还支持服务器主动推送，允许服务器在客户端请求之前主动发送相应资源，提高了加载速度。

HTTP/3是基于UDP协议的新一代HTTP协议，也称为QUIC(Quick UDP Internet Connections)。相较于TCP协议，UDP协议具有更低的延迟和更好的拥塞控制。HTTP/3使用QUIC作为传输协议，通过多路复用和快速连接建立来提供更快的加载速度和更低的延迟。此外，HTTP/3还具备更好的容错性，当网络发生中断或切换时，恢复连接的速度更快。HTTP/3还采用了TLS 1.3作为默认的安全层协议，提供了更强的安全性。凭借着0 RTT建立连接、平滑的连接迁移、基本消除了队头阻塞、改进的拥塞控制和流量控制等优秀的特性，QUIC在绝大多数场景下获得了比HTTP/2更好的效果。

总的来说，HTTP/2和HTTP/3相较于HTTP/1.1在性能和效率方面有显著的改进。HTTP/2引入了二进制分帧、多路复用和头部压缩等特性，提高了性能和效率。HTTP/3则基于UDP协议，进一步提高了加载速度和容错性，并增强了安全性。



## 说说 HTTP/1.1 相比 HTTP/1.0 提高了什么性能？
HTTP/1.1 相比 HTTP/1.0 性能上的改进：  
* 使用 TCP 长连接的方式改善了 HTTP/1.0 短连接造成的性能开销。
* 支持管道（pipeline）网络传输，只要第一个请求发出去了，不必等其回来，就可以发第二个请求出去，可以减少整体的响应时间。

但 HTTP/1.1 还是有性能瓶颈：  
* 请求 / 响应头部（Header）未经压缩就发送，首部信息越多延迟越大。只能压缩 Body 的部分；
* 发送冗长的首部。每次互相发送相同的首部造成的浪费较多；
* 服务器是按请求的顺序响应的，如果服务器响应慢，会招致客户端一直请求不到数据，也就是队头阻塞；
* 没有请求优先级控制；
* 请求只能从客户端开始，服务器只能被动响应。

## 那上面的 HTTP/1.1 的性能瓶颈，HTTP/2 做了什么优化？
HTTP/2 协议是基于 HTTPS 的，所以 HTTP/2 的安全性也是有保障的。  

那 HTTP/2 相比 HTTP/1.1 性能上的改进：  
1.头部压缩  
HTTP/2 会压缩头（Header）如果你同时发出多个请求，他们的头是一样的或是相似的，那么，协议会帮你消除重复的部分。  

2.二进制格式  
HTTP/2 不再像 HTTP/1.1 里的纯文本形式的报文，而是全面采用了二进制格式，头信息和数据体都是二进制，并且统称为帧（frame）：头信息帧和数据帧。
这样虽然对人不友好，但是对计算机非常友好，因为计算机只懂二进制，那么收到报文后，无需再将明文的报文转成二进制，而是直接解析二进制报文，这增加了数据传输的效率。  

3.数据流  
HTTP/2 的数据包不是按顺序发送的，同一个连接里面连续的数据包，可能属于不同的回应。因此，必须要对数据包做标记，指出它属于哪个回应。    
每个请求或回应的所有数据包，称为一个数据流（Stream）。每个数据流都标记着一个独一无二的编号，其中规定客户端发出的数据流编号为奇数， 服务器发出的数据流编号为偶数  
客户端还可以指定数据流的优先级。优先级高的请求，服务器就先响应该请求。  

4.多路复用
HTTP/2 是可以在一个连接中并发多个请求或回应，而不用按照顺序一一对应。    
移除了 HTTP/1.1 中的串行请求，不需要排队等待，也就不会再出现「队头阻塞」问题，降低了延迟，大幅度提高了连接的利用率。  

5.服务器推送
HTTP/2 还在一定程度上改善了传统的「请求 - 应答」工作模式，服务不再是被动地响应，也可以主动向客户端发送消息。  
举例来说，在浏览器刚请求 HTML 的时候，就提前把可能会用到的 JS、CSS 文件等静态资源主动发给客户端，减少延时的等待，也就是服务器推送（Server Push，也叫 Cache Push）。  

## HTTP/2 有哪些缺陷？HTTP/3 做了哪些优化？
HTTP/2 主要的问题在于，多个 HTTP 请求在复用一个 TCP 连接，下层的 TCP 协议是不知道有多少个 HTTP 请求的。所以一旦发生了丢包现象，就会触发 TCP 的重传机制，这样在一个 TCP 连接中的所有的 HTTP 请求都必须等待这个丢了的包被重传回来。  

* HTTP/1.1 中的管道（ pipeline）传输中如果有一个请求阻塞了，那么队列后请求也统统被阻塞住了
* HTTP/2 多个请求复用一个TCP连接，一旦发生丢包，就会阻塞住所有的 HTTP 请求。

这都是基于 TCP 传输层的问题，所以 HTTP/3 把 HTTP 下层的 TCP 协议改成了 UDP！  
* QUIC 有自己的一套机制可以保证传输的可靠性的。当某个流发生丢包时，只会阻塞这个流，其他流不会受到影响。
* TLS3 升级成了最新的 1.3 版本，头部压缩算法也升级成了 QPack。
* HTTPS 要建立一个连接，要花费 6 次交互，先是建立三次握手，然后是 TLS/1.3 的三次握手。QUIC 直接把以往的 TCP 和 TLS/1.3 的 6 次交互合并成了 3 次，减少了交互次数。
QUIC 是新协议，对于很多网络设备，根本不知道什么是 QUIC，只会当做 UDP，这样会出现新的问题。所以 HTTP/3 现在普及的进度非常的缓慢，不知道未来 UDP 是否能够逆袭 TCP。


# HTTP2的多路复用原理
在HTTP/2中，数据不再像HTTP/1.1那样以文本的形式进行传输，而是被分割成更小的二进制帧。每个帧都包含头部信息和负载数据，头部信息中包含帧的类型、长度、流标识等信息，负载数据则是实际的数据内容。帧是HTTP/2中数据传输的最小单位，通过二进制编码和传输，可以提高数据的解析效率和传输速度。

流是HTTP/2中另一个重要的概念，它是存在于连接中的一个虚拟通道，用于承载双向消息。每个流都有一个唯一的整数ID，通过这个ID可以标识和追踪不同的流。流可以承载多个帧，包括请求头帧、请求体帧、响应头帧、响应体帧等。在HTTP/2中，同一个HTTP请求和响应会被分配到一个流上，通过流ID进行标识和追踪。

多路复用是指在一个单一的TCP连接上同时处理多个请求和响应。在HTTP/1.1中，每个请求都需要建立一个新的TCP连接，这会导致队头阻塞和性能下降。而在HTTP/2中，由于引入了二进制分帧和流的概念，可以将多个请求和响应拆分成不同的帧，然后在同一个TCP连接上交错发送和接收这些帧。由于帧的发送和接收是并行的，因此可以大大提高性能和效率。

通过多路复用技术，HTTP/2可以在单个TCP连接上并发处理多个请求和响应，避免了队头阻塞和性能下降的问题。同时，由于使用了二进制分帧和流的概念，可以更加高效地进行数据传输和追踪。这些改进使得HTTP/2在性能和效率方面相比HTTP/1.1有了显著的提升。

# 参考
[硬核！30 张图解 HTTP 常见的面试题](https://www.cnblogs.com/xiaolincoding/p/12442435.html)

