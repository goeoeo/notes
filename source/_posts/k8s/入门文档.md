---
categories: 
- k8s
tags:
- k8s
---
## Kubernetes简介
Kubernetes（简称K8S，K和S之间有8个字母）是用于自动部署，扩展和管理容器化应用程序的开源系统。它将组成应用程序的容器组合成逻辑单元，
以便于管理和服务发现。Kubernetes 源自Google 15 年生产环境的运维经验，同时凝聚了社区的最佳创意和实践。  


## Kubernetes特性
* 服务发现与负载均衡:无需修改你的应用程序即可使用陌生的服务发现机制。
* 存储编排:自动挂载所选存储系统，包括本地存储。
* Secret和配置管理: 部署更新Secrets和应用程序的配置时不必重新构建容器镜像，且不必将软件堆栈配置中的秘密信息暴露出来。
* 批量执行: 除了服务之外，Kubernetes还可以管理你的批处理和CI工作负载，在期望时替换掉失效的容器。
* 水平扩缩:使用一个简单的命令、一个UI或基于CPU使用情况自动对应用程序进行扩缩。
* 自动化上线和回滚: Kubernetes会分步骤地将针对应用或其配置的更改上线，同时监视应用程序运行状况以确保你不会同时终止所有实例。
* 自动装箱:根据资源需求和其他约束自动放置容器，同时避免影响可用性。
* 自我修复:重新启动失败的容器，在节点死亡时替换并重新调度容器，杀死不响应用户定义的健康检查的容器。


## Minikube
Minikube是一种轻量级的Kubernetes实现，可在本地计算机上创建VM并部署仅包含一个节点的简单集群，Minikube可用于Linux、MacOS和Windows系统。
Minikube CLI提供了用于引导集群工作的多种操作，包括启动、停止、查看状态和删除。

## Kubernetes核心组件

### master组件
* apiserver 集群统一入口，以restful方式，交给etcd存储
* scheduler 节点调度，选择node节点部署应用
* controller-manager 处理集群中常规后台任务，一个资源对应一个控制器
* etcd 分布式存储数据库，保存集群相关数据

### Node
* kubelet master派到node节点代表，管理本机容器
* kube-proxy 提供网络代理、负载均衡等操作


## k8s核心概念

### Pod 
* k8s中最小的部署单元
* 一组容器的集合
* 一个Pod中的容器共享网络、存储
* 生命周期是短暂的

### controller
* 确保预期的pod的副本的数量
* 无状态的应用部署
* 有状态的应用部署
> 确保所有的node运行一个pod,一次性任务和定时任务



### service
* 定义一组pod的访问规则




## 搭建k8s集群

### 搭建k8s环境平台规则

#### 单master集群

#### 多master集群
node通过一个负载均衡机制和master交互

### 服务器硬件配置要求
#### 测试环境
* master 2核 4g 20g
* node 4核 8g 40g


### 搭建k8s集群部署方式
#### kubeadm
kubeadm 是官方社区退出的一个用于快速部署k8s集群的工具，这个工具能通过两条指令完成一个k8s集群的部署

#### 二进制包





































