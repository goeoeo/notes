---
title: Http面试题
categories: 
- interview
tags:
- 面试题
---


# 从URL在浏览器输入到页面展现的过程中发生了什么
1. DNS解析：首先，浏览器会解析输入的URL，将其中的域名转换为对应的IP地址。这个过程涉及到DNS（Domain Name System）解析。浏览器首先会查看本地缓存中是否有该域名的IP地址记录，如果有则直接使用。如果没有，浏览器会向DNS服务器发送查询请求。DNS服务器会递归查询域名，最终找到对应的IP地址并返回给浏览器。
2. 建立TCP连接：拿到服务器的IP地址后，浏览器会与服务器建立TCP（Transmission Control Protocol）连接。这个过程包括三次握手：
    * 客户端发送SYN（同步）报文，并置发送序号为X。
    * 服务端回复SYN+ACK（同步/应答）报文，并置发送序号为Y，再确认序号为X+1。
    * 客户端发送ACK（应答）报文，并置发送序号为Z，再确认序号为Y+1。这样，TCP连接就建立起来了。
3. 发送HTTP请求：建立TCP连接后，浏览器会向服务器发送HTTP请求。HTTP请求报文包括了请求方法（如GET、POST等）、请求路径、协议版本以及请求头部信息等。这些信息封装在TCP报文段中发送给服务器。
4. 服务器处理HTTP请求：服务器接收到HTTP请求后，会根据请求路径和方法来定位并处理相应的资源。这可能涉及到文件读取、数据库查询等操作。处理完成后，服务器会生成HTTP响应报文，其中包括状态码、响应头部信息以及响应体等。
5. 返回HTTP响应：服务器将HTTP响应报文通过之前建立的TCP连接发送回浏览器。浏览器接收到响应报文后，会解析HTTP响应，提取出状态码、响应头部以及响应体等信息。
6. 渲染页面：浏览器根据解析得到的HTML文档构建DOM（Document Object Model）树，并下载并解析CSS样式表、JavaScript脚本等资源。然后，浏览器会进行页面渲染，将HTML、CSS和JavaScript等组合起来生成最终的页面展示给用户。
7. 关闭TCP连接：当浏览器从服务器接收到所有需要的数据后，会关闭TCP连接。这个过程包括四次挥手：
    * 客户端发送FIN（结束）报文，通知服务器要关闭连接。
    * 服务器回复ACK报文，确认收到关闭连接的请求。
    * 服务器发送FIN报文，通知客户端已经关闭连接。
    * 客户端回复ACK报文，确认收到服务器关闭连接的通知。这样，TCP连接就被关闭了。

<!--more-->


# HTTP1.1/HTTP2/HTTP3 的区别
HTTP1.1:   
1. 支持了长连接
2. 串行请求带来的队头阻塞的问题
3. Pipelining技术可以在一个tcp上发送多个请求，但响应还是依次回来的


HTTP2:  
1. 引入二进制分帧，实现多路复用，解决http协议层面的队头阻塞问题，但TCP层面的队头阻塞问题，依然存在
2. 支持头部压缩
3. 支持服务器主动推送


HTTP3:  
1. QUIC协议，基于UDP


> 一个浏览器针对每一个域名最大可以建立6个TCP连接
# 简述HTTP2.0多路复用

每个请求都被视为一个独立的流，每个流都有一个唯一的标识符,因此服务器无须再顺序返回请求。

# HTTP协议和RPC协议有什么区别
1. 基于的通信协议：HTTP协议主要基于HTTP，而RPC（远程过程调用）协议则更为灵活，可以基于HTTP、TCP和UDP等协议。
2. 调用方式：HTTP接口通过URL进行调用，而RPC接口则通过函数调用进行调用。这意味着RPC在调用时具有更直接的特性。
3. 使用场景：HTTP协议主要用于B/S架构，特别是在Web浏览器和服务器之间的数据通信中。而RPC则更多地用于C/S架构，如分布式系统内部集群，如云计算、微服务架构、分布式数据库等，以实现不同服务之间的远程调用和分布式系统协作。
4. 传输效率：RPC使用自定义的TCP协议，使得请求报文体积更小，从而提高了传输效率。而HTTP协议，尤其是基于HTTP1.1的协议，请求中会包含很多无用的内容，从而降低了传输效率。
5. 性能与效率：RPC协议通常使用二进制编码来传输数据，相对于HTTP协议的文本传输，RPC具有更高的性能和效率。此外，RPC协议还常采用高效的序列化和反序列化技术，进一步减少了数据传输的大小和开销，提高了通信的速度和响应时间。
6. 安全性：由于RPC常用于内部系统间的通信，通常在内部网络环境下进行，因此其安全性相对更高。

# 简述HTTPS加密过程
HTTPS的加密过程实际上是一个混合加密过程，涉及建立连接前的连接阶段和建立连接后的通信阶段  
1. 客户端发起HTTPS请求：首先，客户端（通常是浏览器）向服务器发送一个HTTPS请求。这个请求中包含了客户端支持的加密算法种类、SSL/TLS协议版本号以及一个随机数等信息。
2. 服务器的响应：服务器收到请求后，会向客户端回传SSL/TLS协议版本号、选择的加密算法和HASH算法、服务器的证书（包含了网站的地址、加密公钥以及证书的颁发机构等信息）以及一个随机数。
3. 客户端验证服务器的合法性：客户端利用收到的服务器证书中的信息验证服务器的合法性。验证包括检查证书是否过期、发行证书的CA是否可靠、证书的公钥能否正确解开证书的数字签名以及证书上的域名是否与实际的服务器域名匹配等。如果验证通过，则继续通信，否则断开连接。
4. 生成对称加密密钥：在验证服务器合法性后，客户端会生成一个随机数作为对称加密的密钥。
5. 密钥的加密传输：客户端使用服务器证书中的公钥对这个对称加密密钥进行加密，得到加密后的密钥。
6. 加密密钥的传输与解密：客户端将加密后的密钥发送给服务器。服务器使用自己的私钥对接收到的加密密钥进行解密，得到对称加密的密钥。
7. 使用对称加密密钥进行通信：至此，客户端和服务器之间共享了一个对称加密密钥。之后的消息传递都会使用这个对称加密密钥进行加密和解密，确保通信内容的安全性。

在整个过程中，HTTPS采用了非对称加密和对称加密相结合的方式，既保证了数据传输的安全性，又提高了加密和解密的效率。同时，通过摘要算法和数字签名等技术，保证了数据的完整性和服务器的身份认证。

